import{d as z,y as T,k as f,b as B,o,e as n,g as i,C as A,F as k,B as q,i as g,c as K,w as N,f as S,u as j,z as D,D as E,P as I,a as F,I as w,L as P,K as Q,N as R}from"./app-592255ea.js";import{_ as W}from"./AuroraPostCollapse.vue_vue_type_script_setup_true_lang-f0cb1e2d.js";import{s as b,a as M,_ as G}from"./index-9636bf2a.js";const H={class:"category-header"},J={key:0,"i-ri-folder-add-line":""},O={key:1,"i-ri-folder-reduce-line":""},X={key:0,class:"category-container"},Y={class:"category-list"},Z={class:"category-list"},x=i("div",{"i-ri-file-text-line":""},null,-1),ee=z({__name:"AuroraCategory",props:{parentKey:{},category:{},level:{default:0},collapsable:{type:Boolean,default:!0}},setup(C){var y;const u=C,p=T(),l=f(!0);function d(t){p.push({query:{category:t}}),b(".post-collapse-container")}const m=f([]),_=f([]);return(y=u==null?void 0:u.category)==null||y.children.forEach(t=>{const r=t;r.children?_.value.push(r):m.value.push(r)}),(t,r)=>{var h,c,a;const s=B("AuroraCategory",!0),$=B("router-link");return o(),n(k,null,[i("div",H,[i("span",{onClick:r[0]||(r[0]=e=>l.value=!l.value)},[l.value?(o(),n("div",J)):(o(),n("div",O))]),i("span",{onClick:r[1]||(r[1]=e=>d(t.parentKey))},A(((h=t.category)==null?void 0:h.name)==="Uncategorized"?"未分类":(c=t.category)==null?void 0:c.name)+" ["+A((a=t.category)==null?void 0:a.total)+"] ",1)]),l.value?S("v-if",!0):(o(),n("div",X,[i("ul",Y,[(o(!0),n(k,null,q(_.value,(e,v)=>(o(),n("li",{key:v},[i("div",Z,[g(s,{"parent-key":t.parentKey?`${t.parentKey}/${e==null?void 0:e.name}`:e==null?void 0:e.name,category:e,level:t.level+1,collapsable:t.collapsable},null,8,["parent-key","category","level","collapsable"])])]))),128)),(o(!0),n(k,null,q(m.value,(e,v)=>(o(),n("li",{key:v,class:"category-post-item"},[e!=null&&e.title?(o(),K($,{key:0,to:(e==null?void 0:e.path)||""},{default:N(()=>[x,i("span",null,A(e==null?void 0:e.title),1)]),_:2},1032,["to"])):S("v-if",!0)]))),128))])]))],64)}}}),te={class:"categories"},oe=z({__name:"AuroraCategories",setup(C){const u=j(),p=D().name,l=M(u.value.menu,p),d=E(),m=I().value.children,_=f(!0),y=f(0),t=D(),r=T(),s=F(()=>t.query.category||""),$=F(()=>d.postList.filter(a=>a.categories&&s.value!=="Uncategorized"?typeof a.categories=="string"?a.categories===s.value:a.categories.join("/").startsWith(s.value)&&a.categories[0]===s.value.split("/")[0]:!a.categories&&s.value==="Uncategorized"?a.categories===void 0:!1));function h(){const c=t.name;c&&r.push({name:c})}return(c,a)=>{const e=G,v=ee,U=W;return o(),n("div",te,[g(e,{quote:w(l)},null,8,["quote"]),(o(!0),n(k,null,q(w(m),(L,V)=>(o(),n("ul",{key:V,class:"category-list"},[g(v,{"parent-key":L.name,category:L,level:y.value+1,collapsable:_.value},null,8,["parent-key","category","level","collapsable"])]))),128)),g(U,{title:s.value,posts:$.value,back:h},null,8,["title","posts"])])}}}),se=z({__name:"categories",setup(C){const p=P().value.comment||!1;return(l,d)=>{const m=oe,_=B("router-view"),y=R,t=Q;return o(),K(t,null,{"main-content":N(()=>[g(m),g(_)]),"main-comment":N(()=>[w(p)?(o(),K(y,{key:0})):S("v-if",!0)]),_:1})}}});export{se as default};
